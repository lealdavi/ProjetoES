<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Cadastrar Treino</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>body { font-family: 'Inter', sans-serif; }</style>
</head>
<body class="bg-gray-50 min-h-screen p-6">
    <div class="max-w-5xl mx-auto bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100">
        
        <!-- Header -->
        <div class="bg-gray-900 text-white p-8">
            <h1 class="text-3xl font-bold">Montar Treino</h1>
            <p class="opacity-80 mt-2 text-lg">Aluno: <span class="font-bold text-green-400">{{ nome_aluno }}</span></p>
        </div>

        <form action="/professor/add_treino" method="POST" class="p-8">
            <input type="hidden" name="id_aluno" value="{{ id_aluno }}">
            
            <!-- SeleÃ§Ã£o de Tipo -->
            <div class="mb-10">
                <h3 class="text-lg font-bold text-gray-800 mb-4">1. Escolha a Letra do Treino</h3>
                <div class="flex flex-wrap gap-4">
                    {% for letra in ['A','B','C','D','E','F','G'] %}
                    <label class="cursor-pointer">
                        <input type="radio" name="tipo_treino" value="{{ letra }}" required class="peer sr-only">
                        <span class="block w-12 h-12 flex items-center justify-center rounded-xl bg-gray-100 text-gray-500 font-bold text-xl peer-checked:bg-indigo-600 peer-checked:text-white peer-checked:shadow-lg transition">
                            {{ letra }}
                        </span>
                    </label>
                    {% endfor %}
                </div>
            </div>

            <hr class="border-gray-100 mb-10">

            <!-- Lista de ExercÃ­cios -->
            <div class="mb-10">
                <h3 class="text-lg font-bold text-gray-800 mb-6">2. Selecione e Configure os ExercÃ­cios</h3>
                
                <div class="space-y-4">
                    {% for exercicio in resultado %}
                    <div class="p-4 rounded-xl border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition flex flex-col md:flex-row md:items-center justify-between gap-4 group">
                        
                        <label class="flex items-center cursor-pointer flex-grow">
                            <input type="checkbox" name="exercicios_selecionados" value="{{ exercicio['id_exercicio'] }}" class="w-6 h-6 text-indigo-600 rounded focus:ring-indigo-500 border-gray-300">
                            <span class="ml-4 font-semibold text-gray-700 group-hover:text-indigo-900 text-lg">{{ exercicio['nome'] }}</span>
                        </label>

                        <div class="flex gap-2">
                            <div class="flex flex-col">
                                <span class="text-[10px] uppercase font-bold text-gray-400 mb-1">SÃ©ries</span>
                                <input type="number" name="series_{{ exercicio['id_exercicio'] }}" class="w-20 p-2 border border-gray-300 rounded-lg text-center font-mono focus:border-indigo-500 focus:outline-none" placeholder="3" min="1">
                            </div>
                            <div class="flex flex-col">
                                <span class="text-[10px] uppercase font-bold text-gray-400 mb-1">Reps</span>
                                <input type="number" name="repeticoes_{{ exercicio['id_exercicio'] }}" class="w-20 p-2 border border-gray-300 rounded-lg text-center font-mono focus:border-indigo-500 focus:outline-none" placeholder="12" min="1">
                            </div>
                            <div class="flex flex-col">
                                <span class="text-[10px] uppercase font-bold text-gray-400 mb-1">Intervalo (s)</span>
                                <input type="number" name="intervalo_{{ exercicio['id_exercicio'] }}" class="w-20 p-2 border border-gray-300 rounded-lg text-center font-mono focus:border-indigo-500 focus:outline-none" placeholder="60" min="1">
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Footer Actions -->
            <div class="flex items-center justify-end gap-4 border-t pt-8">
                <a href="/professor/cadastrar" class="text-gray-500 font-semibold hover:text-red-500 transition">Cancelar</a>
                <button type="submit" class="bg-green-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-green-700 transition shadow-lg">
                    ðŸ’¾ Salvar Treino
                </button>
            </div>
        </form>
    </div>
    <script>
        document.querySelector("form").addEventListener("submit", function(e) {

            const checkboxes = document.querySelectorAll('input[type="checkbox"][name="exercicios_selecionados"]');
            let erro = false;

            checkboxes.forEach(chk => {
                if (chk.checked) {
                    const id = chk.value;

                    const series = document.querySelector(`input[name="series_${id}"]`).value;
                    const reps = document.querySelector(`input[name="repeticoes_${id}"]`).value;
                    const intervalo = document.querySelector(`input[name="intervalo_${id}"]`).value;

                    if (!series || series <= 0 || !reps || reps <= 0 || !intervalo || intervalo <= 0) {
                        erro = true;
                    }
                }
            });

            if (erro) {
                e.preventDefault(); // impede o envio!!
                alert("âš ï¸ Preencha todos os campos do exercÃ­cio selecionado");
            }
        });
    </script>
</body>
</html>